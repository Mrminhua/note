# 方案业务


# 方案设计

* 1、注册系统IDLE和充电广播
* 2、开发者选项当中增加开关
* 3、白名单设计，使得能够排除系统当中重要的Alarm

# 方案实现

* 1、注册DeviceIdleController的进入IDLE的广播
* 2、注册充电的广播
* 3、注册PUSH的广播
* 4、在Alarm进行添加、重排、进入IDLE的情况下对系统当中对时间没有精确要求、不重要的修改其值
* 5、让Alarm的发生时间改为原来的whenElsped除以固定周期5分钟加0.5向上取整然后乘以周期whenElsped =（whenElsped/5*60*1000 + 0.5）* 5*60*1000
* 6、这样就可以使得不重要的Alarm在设备IDLE状态下以五分钟的周期进行唤醒，从而让系统可以不频繁唤醒；其次可以修改不重要Alarm的类型，使得具有wake的为普通RTC的Alarm
* 8、增加白名单，在对Alarm对齐时读取配置文件将配置文件当中的跳过